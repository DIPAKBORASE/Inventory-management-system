(self.webpackChunkinventory_and_material_management=self.webpackChunkinventory_and_material_management||[]).push([[488],{488:(e,t,n)=>{"use strict";n.r(t),n.d(t,{EngineersModule:()=>V});var s=n(8583),i=n(4330),o=n(7716),r=n(665),a=n(3647),l=n(2340),c=n(1841);let u=(()=>{class e{constructor(e){this.http=e}getRequest(e){return this.http.post(`${l.N.api}/request/getRequest`,e)}changeStatus(e){return this.http.post(`${l.N.api}/support/changeSupportRequestStatus`,e)}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(c.eN))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=n(1993),p=n(9866);function Z(e,t){if(1&e&&(o.TgZ(0,"div",5),o.TgZ(1,"span",6),o.TgZ(2,"small"),o._uU(3,"Requester Remark"),o.qZA(),o.qZA(),o.TgZ(4,"p",7),o._uU(5),o.qZA(),o.qZA()),2&e){const e=o.oxw();o.xp6(5),o.hij(" ",null==e.response?null:e.response.Requester_Remark," ")}}function d(e,t){1&e&&(o.TgZ(0,"p"),o._UZ(1,"i",31),o._UZ(2,"i",32),o._UZ(3,"i",32),o._UZ(4,"i",32),o._UZ(5,"i",32),o._UZ(6,"i",32),o._UZ(7,"i",32),o._UZ(8,"i",32),o._UZ(9,"i",32),o._UZ(10,"i",32),o.qZA())}function _(e,t){1&e&&(o.TgZ(0,"p"),o._UZ(1,"i",31),o._UZ(2,"i",31),o._UZ(3,"i",32),o._UZ(4,"i",32),o._UZ(5,"i",32),o._UZ(6,"i",32),o._UZ(7,"i",32),o._UZ(8,"i",32),o._UZ(9,"i",32),o._UZ(10,"i",32),o.qZA())}function h(e,t){1&e&&(o.TgZ(0,"p"),o._UZ(1,"i",31),o._UZ(2,"i",31),o._UZ(3,"i",31),o._UZ(4,"i",32),o._UZ(5,"i",32),o._UZ(6,"i",32),o._UZ(7,"i",32),o._UZ(8,"i",32),o._UZ(9,"i",32),o._UZ(10,"i",32),o.qZA())}function q(e,t){1&e&&(o.TgZ(0,"p"),o._UZ(1,"i",31),o._UZ(2,"i",31),o._UZ(3,"i",31),o._UZ(4,"i",31),o._UZ(5,"i",32),o._UZ(6,"i",32),o._UZ(7,"i",32),o._UZ(8,"i",32),o._UZ(9,"i",32),o._UZ(10,"i",32),o.qZA())}function f(e,t){1&e&&(o.TgZ(0,"p"),o._UZ(1,"i",31),o._UZ(2,"i",31),o._UZ(3,"i",31),o._UZ(4,"i",31),o._UZ(5,"i",31),o._UZ(6,"i",32),o._UZ(7,"i",32),o._UZ(8,"i",32),o._UZ(9,"i",32),o._UZ(10,"i",32),o.qZA())}function m(e,t){1&e&&(o.TgZ(0,"p"),o._UZ(1,"i",31),o._UZ(2,"i",31),o._UZ(3,"i",31),o._UZ(4,"i",31),o._UZ(5,"i",31),o._UZ(6,"i",31),o._UZ(7,"i",32),o._UZ(8,"i",32),o._UZ(9,"i",32),o._UZ(10,"i",32),o.qZA())}function U(e,t){1&e&&(o.TgZ(0,"p"),o._UZ(1,"i",31),o._UZ(2,"i",31),o._UZ(3,"i",31),o._UZ(4,"i",31),o._UZ(5,"i",31),o._UZ(6,"i",31),o._UZ(7,"i",31),o._UZ(8,"i",32),o._UZ(9,"i",32),o._UZ(10,"i",32),o.qZA())}function T(e,t){1&e&&(o.TgZ(0,"p"),o._UZ(1,"i",31),o._UZ(2,"i",31),o._UZ(3,"i",31),o._UZ(4,"i",31),o._UZ(5,"i",31),o._UZ(6,"i",31),o._UZ(7,"i",31),o._UZ(8,"i",31),o._UZ(9,"i",32),o._UZ(10,"i",32),o.qZA())}function A(e,t){1&e&&(o.TgZ(0,"p"),o._UZ(1,"i",31),o._UZ(2,"i",31),o._UZ(3,"i",31),o._UZ(4,"i",31),o._UZ(5,"i",31),o._UZ(6,"i",31),o._UZ(7,"i",31),o._UZ(8,"i",31),o._UZ(9,"i",31),o._UZ(10,"i",32),o.qZA())}function v(e,t){1&e&&(o.TgZ(0,"p"),o._UZ(1,"i",31),o._UZ(2,"i",31),o._UZ(3,"i",31),o._UZ(4,"i",31),o._UZ(5,"i",31),o._UZ(6,"i",31),o._UZ(7,"i",31),o._UZ(8,"i",31),o._UZ(9,"i",31),o._UZ(10,"i",31),o.qZA())}function x(e,t){if(1&e&&(o.TgZ(0,"div",29),o.TgZ(1,"span",7),o._uU(2,"Rating"),o.qZA(),o.YNc(3,d,11,0,"p",30),o.YNc(4,_,11,0,"p",30),o.YNc(5,h,11,0,"p",30),o.YNc(6,q,11,0,"p",30),o.YNc(7,f,11,0,"p",30),o.YNc(8,m,11,0,"p",30),o.YNc(9,U,11,0,"p",30),o.YNc(10,T,11,0,"p",30),o.YNc(11,A,11,0,"p",30),o.YNc(12,v,11,0,"p",30),o.qZA()),2&e){const e=o.oxw();o.xp6(3),o.Q6J("ngIf",1==(null==e.response?null:e.response.Rating)),o.xp6(1),o.Q6J("ngIf",2==(null==e.response?null:e.response.Rating)),o.xp6(1),o.Q6J("ngIf",3==(null==e.response?null:e.response.Rating)),o.xp6(1),o.Q6J("ngIf",4==(null==e.response?null:e.response.Rating)),o.xp6(1),o.Q6J("ngIf",5==(null==e.response?null:e.response.Rating)),o.xp6(1),o.Q6J("ngIf",6==(null==e.response?null:e.response.Rating)),o.xp6(1),o.Q6J("ngIf",7==(null==e.response?null:e.response.Rating)),o.xp6(1),o.Q6J("ngIf",8==(null==e.response?null:e.response.Rating)),o.xp6(1),o.Q6J("ngIf",9==(null==e.response?null:e.response.Rating)),o.xp6(1),o.Q6J("ngIf",10==(null==e.response?null:e.response.Rating))}}function b(e,t){if(1&e&&(o.TgZ(0,"div",5),o.TgZ(1,"span",6),o._uU(2,"Assigned Time"),o.qZA(),o.TgZ(3,"p",7),o._uU(4),o.ALo(5,"date"),o.qZA(),o.qZA()),2&e){const e=o.oxw(2);o.xp6(4),o.hij(" ",o.xi3(5,1,null==e.response?null:e.response.Assigned_Date,"d/M/yyyy, h:mm a ")," ")}}function P(e,t){if(1&e&&(o.TgZ(0,"div",5),o.TgZ(1,"span",6),o._uU(2,"Resolved Time"),o.qZA(),o.TgZ(3,"p",7),o._uU(4),o.ALo(5,"date"),o.qZA(),o.qZA()),2&e){const e=o.oxw(2);o.xp6(4),o.hij(" ",o.xi3(5,1,null==e.response?null:e.response.Resolved_Date,"d/M/yyyy, h:mm a ")," ")}}function w(e,t){if(1&e&&(o.TgZ(0,"div",5),o.TgZ(1,"span",6),o._uU(2,"TAT"),o.qZA(),o.TgZ(3,"p",7),o._uU(4),o.qZA(),o.qZA()),2&e){const e=o.oxw(2);o.xp6(4),o.hij(" ",null==e.response?null:e.response.TAT," ")}}function S(e,t){if(1&e&&(o.TgZ(0,"div",10),o.YNc(1,b,6,4,"div",9),o.YNc(2,P,6,4,"div",9),o.YNc(3,w,5,1,"div",9),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",null!=(null==e.response?null:e.response.Assigned_Date)),o.xp6(1),o.Q6J("ngIf",null!=(null==e.response?null:e.response.Resolved_Date)),o.xp6(1),o.Q6J("ngIf",null!=(null==e.response?null:e.response.TAT))}}function R(e,t){1&e&&(o.TgZ(0,"div",35),o._uU(1," Status is required "),o.qZA())}function y(e,t){if(1&e&&(o.TgZ(0,"div",33),o.YNc(1,R,2,0,"div",34),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",e.f.Status.errors.required)}}function C(e,t){1&e&&(o.TgZ(0,"div",35),o._uU(1," Comment is required "),o.qZA())}function k(e,t){if(1&e&&(o.TgZ(0,"div",33),o.YNc(1,C,2,0,"div",34),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",e.f.Support_Comment.errors.required)}}let I=(()=>{class e{constructor(e,t,n,s,i){this.bsModalRef=e,this.formBuilder=t,this._engineerService=n,this._mastersService=s,this.spinner=i,this.isWebRequest=!1,this.notifyParent=new o.vpe,this.changeStatusForm=this.formBuilder.group({Status:["",r.kI.required],Support_Comment:[null,r.kI.required]})}ngOnInit(){this.getRequest()}get f(){return this.changeStatusForm.controls}getRequest(){this._engineerService.getRequest({id:this.ID}).subscribe(e=>{e.error?this._mastersService.showalert(e.message?e.message:e.data[0].msg,"error"):(this.response=e.data,this.changeStatusForm.patchValue({Status:this.response.Status,Support_Comment:this.response.Support_Comment}))},e=>{console.log(e),this._mastersService.showalert(e.error,"error")})}close(){this.bsModalRef.hide(),this.notifyParent.emit(!1)}onSubmit(){this.isWebRequest=!0;let e={id:this.ID,Status:this.changeStatusForm.value.Status,Support_Comment:this.changeStatusForm.value.Support_Comment};this.spinner.show(),this._engineerService.changeStatus(e).subscribe(e=>{this.spinner.hide(),this.isWebRequest=!1,e.error?this._mastersService.showalert(e.message,"error"):(this._mastersService.showalert(e.message,"success"),this.notifyParent.emit(!0),this.bsModalRef.hide())},e=>{this.spinner.hide(),this.isWebRequest=!1,this._mastersService.showalert(e.error.message,"error")})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(a.UZ),o.Y36(r.qu),o.Y36(u),o.Y36(g.R),o.Y36(p.t2))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-engineer-view"]],outputs:{notifyParent:"notifyParent"},decls:103,vars:20,consts:[[1,"modal-header","bg-light"],[1,"modal-title","pull-left","fw-bold","mr-3","ms-3"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","mx-1"],[1,"row","justify-content-md-start","ms-1","me-3"],[1,"col-lg-4","col-12"],[1,"fw-bold"],[1,"text-muted"],[1,"col-lg-3","col-12"],["class","col-lg-4 col-12",4,"ngIf"],[1,"row","mb-2"],["class","col-lg-6col-12",4,"ngIf"],["class","row mb-2",4,"ngIf"],[1,"col-lg-12","col-12"],[1,"mt-3"],[3,"formGroup"],[1,"col-6"],["for",""],[1,"text-dark","fw-bold"],["formControlName","Status",1,"form-select"],["value","Open"],["value","In Progress"],["value","Resolved"],["value","Discarded"],["class","text-danger",4,"ngIf"],[1,"col-12"],["type","text","formControlName","Support_Comment",1,"form-control","input-group-sm"],[1,"row","justify-content-md-start","ms-1","me-3","my-2"],[1,"btn","btn-dark",2,"width","100px",3,"disabled","click"],[1,"col-lg-6col-12"],[4,"ngIf"],["aria-hidden","true",1,"fa","fa-star",2,"font-size","22px","color","#f0a316"],["aria-hidden","true",1,"fa","fa-star-o",2,"font-size","22px","color","#f0a316"],[1,"text-danger"],["class","small",4,"ngIf"],[1,"small"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"h5",1),o._uU(2,"View Details"),o.qZA(),o.TgZ(3,"button",2),o.NdJ("click",function(){return t.close()}),o.qZA(),o.qZA(),o.TgZ(4,"div",3),o.TgZ(5,"div",4),o.TgZ(6,"div",5),o.TgZ(7,"span",6),o.TgZ(8,"small"),o._uU(9,"Request ID"),o.qZA(),o.qZA(),o.TgZ(10,"p",7),o._uU(11),o.qZA(),o.qZA(),o.TgZ(12,"div",5),o.TgZ(13,"span",6),o.TgZ(14,"small"),o._uU(15,"Date"),o.qZA(),o.qZA(),o.TgZ(16,"p",7),o._uU(17),o.ALo(18,"date"),o.qZA(),o.qZA(),o.TgZ(19,"div",5),o.TgZ(20,"span",6),o.TgZ(21,"small"),o._uU(22,"Priority"),o.qZA(),o.qZA(),o.TgZ(23,"p",7),o._uU(24),o.qZA(),o.qZA(),o.qZA(),o.TgZ(25,"div",4),o.TgZ(26,"div",8),o.TgZ(27,"span",6),o.TgZ(28,"small"),o._uU(29,"Name"),o.qZA(),o.qZA(),o.TgZ(30,"p",7),o._uU(31),o.qZA(),o.qZA(),o.TgZ(32,"div",8),o.TgZ(33,"span",6),o.TgZ(34,"small"),o._uU(35,"Location"),o.qZA(),o.qZA(),o.TgZ(36,"p",7),o._uU(37),o.qZA(),o.qZA(),o.TgZ(38,"div",8),o.TgZ(39,"span",6),o.TgZ(40,"small"),o._uU(41,"Department"),o.qZA(),o.qZA(),o.TgZ(42,"p",7),o._uU(43),o.qZA(),o.qZA(),o.TgZ(44,"div",8),o.TgZ(45,"span",6),o.TgZ(46,"small"),o._uU(47,"Cost Center"),o.qZA(),o.qZA(),o.TgZ(48,"p",7),o._uU(49),o.qZA(),o.qZA(),o.qZA(),o.TgZ(50,"div",4),o.TgZ(51,"div",5),o.TgZ(52,"span",6),o.TgZ(53,"small"),o._uU(54,"Type Of Issue"),o.qZA(),o.qZA(),o.TgZ(55,"p",7),o._uU(56),o.qZA(),o.qZA(),o.TgZ(57,"div",5),o.TgZ(58,"span",6),o.TgZ(59,"small"),o._uU(60,"Assigned Engineer"),o.qZA(),o.qZA(),o.TgZ(61,"p",7),o._uU(62),o.qZA(),o.qZA(),o.YNc(63,Z,6,1,"div",9),o.qZA(),o.TgZ(64,"div",4),o.TgZ(65,"div",10),o.YNc(66,x,13,10,"div",11),o.qZA(),o.YNc(67,S,4,3,"div",12),o.qZA(),o.TgZ(68,"div",4),o.TgZ(69,"div",13),o.TgZ(70,"span",6),o.TgZ(71,"small"),o._uU(72,"Description"),o.qZA(),o.qZA(),o.TgZ(73,"p",7),o._uU(74),o.qZA(),o.qZA(),o.qZA(),o.TgZ(75,"div",14),o.TgZ(76,"form",15),o.TgZ(77,"div",4),o.TgZ(78,"div",16),o.TgZ(79,"label",17),o.TgZ(80,"small",18),o._uU(81,"Select Status"),o.qZA(),o.qZA(),o.TgZ(82,"select",19),o.TgZ(83,"option",20),o._uU(84,"Open"),o.qZA(),o.TgZ(85,"option",21),o._uU(86,"In Progress"),o.qZA(),o.TgZ(87,"option",22),o._uU(88,"Resolved"),o.qZA(),o.TgZ(89,"option",23),o._uU(90,"Discarded"),o.qZA(),o.qZA(),o.YNc(91,y,2,1,"div",24),o.qZA(),o.qZA(),o.TgZ(92,"div",4),o.TgZ(93,"div",25),o.TgZ(94,"label",17),o.TgZ(95,"small",7),o._uU(96,"Comment"),o.qZA(),o.qZA(),o._UZ(97,"textarea",26),o.YNc(98,k,2,1,"div",24),o.qZA(),o.qZA(),o.TgZ(99,"div",27),o.TgZ(100,"div",25),o.TgZ(101,"button",28),o.NdJ("click",function(){return t.onSubmit()}),o._uU(102," Submit "),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(11),o.hij(" ",null==t.response?null:t.response.Request_Number," "),o.xp6(6),o.hij(" ",o.xi3(18,17,null==t.response?null:t.response.Request_Date,"dd/MM/yyyy")," "),o.xp6(7),o.hij(" ",null==t.response?null:t.response.Priority," "),o.xp6(7),o.hij(" ",null==t.response?null:t.response.user.Name," "),o.xp6(6),o.hij(" ",null==t.response?null:t.response.location.Name," "),o.xp6(6),o.hij(" ",null==t.response?null:t.response.Request_Department," "),o.xp6(6),o.hij(" ",null==t.response?null:t.response.Cost_Center," "),o.xp6(7),o.hij(" ",null==t.response?null:t.response.issue_type.Name," "),o.xp6(6),o.hij(" ",null==t.response?null:t.response.assignUser.Name," "),o.xp6(1),o.Q6J("ngIf",null!=(null==t.response?null:t.response.Requester_Remark)),o.xp6(3),o.Q6J("ngIf",null!=(null==t.response?null:t.response.Rating)),o.xp6(1),o.Q6J("ngIf",t.response),o.xp6(7),o.hij(" ",null==t.response?null:t.response.Description," "),o.xp6(2),o.Q6J("formGroup",t.changeStatusForm),o.xp6(15),o.Q6J("ngIf",t.f.Status.touched&&t.f.Status.errors),o.xp6(7),o.Q6J("ngIf",t.f.Support_Comment.touched&&t.f.Support_Comment.errors),o.xp6(3),o.Q6J("disabled",t.changeStatusForm.invalid||t.isWebRequest))},directives:[s.O5,r._Y,r.JL,r.sg,r.EJ,r.JJ,r.u,r.YN,r.Kr,r.Fj],pipes:[s.uU],styles:[".checked[_ngcontent-%COMP%]{color:orange}"]}),e})();var O=n(9457),N=n(7709),M=n(4395),J=n(7519),Y=n(2468),D=n(7651),Q=n(4249),j=n(7017),E=n(4396),F=n(3556);function K(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",27),o.TgZ(1,"app-kpi-counter",28),o.NdJ("click",function(){const t=o.CHM(e).$implicit;return o.oxw().activeKPI(t.key,t.title)}),o.qZA(),o.qZA()}if(2&e){const e=t.$implicit;o.xp6(1),o.Q6J("title",e.title)("counter",e.counter)("icon",e.icon)("color",e.color)}}function z(e,t){1&e&&(o.TgZ(0,"tr"),o.TgZ(1,"td",32),o.TgZ(2,"b",33),o._uU(3,"No records found"),o.qZA(),o.qZA(),o.qZA())}function L(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"tr"),o.TgZ(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td"),o._uU(8),o.qZA(),o.TgZ(9,"td"),o._uU(10),o.qZA(),o.TgZ(11,"td"),o._uU(12),o.ALo(13,"date"),o.qZA(),o.TgZ(14,"td"),o._uU(15),o.qZA(),o.TgZ(16,"td",34),o._uU(17),o.qZA(),o.TgZ(18,"td"),o._uU(19),o.qZA(),o.TgZ(20,"td",35),o.TgZ(21,"button",36),o.NdJ("click",function(){const t=o.CHM(e).$implicit;return o.oxw(2).ViewEngineerModal(t.ID)}),o._uU(22,"Log Status"),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=t.$implicit,n=t.index;o.xp6(2),o.Oqu(n+1),o.xp6(2),o.Oqu(e.Request_Number),o.xp6(2),o.Oqu(e.Request_Department),o.xp6(2),o.Oqu(e.user.Name),o.xp6(2),o.AsE("",null==e.user?null:e.user.Department," ",null!=e.user&&e.user.Cost_Center?"("+(null==e.user?null:e.user.Cost_Center)+")":"",""),o.xp6(2),o.Oqu(o.xi3(13,10,e.Request_Date,"dd/MM/yyyy")),o.xp6(3),o.Oqu(e.issue_type.Name),o.xp6(2),o.Oqu(e.Description),o.xp6(2),o.Oqu(e.location.Name)}}function B(e,t){if(1&e&&(o.TgZ(0,"tbody",29),o.YNc(1,z,4,0,"tr",30),o.YNc(2,L,23,13,"tr",31),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",0===e.response.data.length),o.xp6(1),o.Q6J("ngForOf",e.response.data)}}function $(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"app-pagination",37),o.NdJ("loadPage",function(t){return o.CHM(e),o.oxw().pager(t)})("changePerPage",function(t){return o.CHM(e),o.oxw().changePerPage(t)}),o.qZA()}if(2&e){const e=o.oxw();o.Q6J("currentPage",e.currentPage)("perPage",e.perPage)("total",e.response.total)("lastPage",e.response.totalPages)}}const W=[{path:"",redirectTo:"engineer"},{path:"engineer",component:(()=>{class e{constructor(e,t,n,s,i,o){this.modalService=e,this.dataservice=t,this._requesterService=n,this._mastersService=s,this._excelService=i,this._requestsPagesService=o,this.eventsCounter=new N.xQ,this.ngUnsubscribe=new N.xQ,this.response=[],this.search="",this.KPItitle="Open",this.KPIkey="Open",this.kpiData=[{icon:"Open.png",title:"Open",counter:0,color:"#3a77af",key:"Open"},{icon:"Overdue.png",title:"In Progress",counter:0,color:"#c48920",key:"In Progress"},{icon:"Completed.png",title:"Resolved",counter:0,color:"#0baa4b",key:"Resolved"},{icon:"Discarded.png",title:"Discarded",counter:0,color:"#dc3545",key:"Discarded"}],this.buttons=[{title:"Open",key:"open"},{title:"In progress",key:"in_progress"},{title:"Completed",key:"completed"},{title:"Discarded",key:"discarded"}],this.searchTermChanged=new N.xQ,this.perPage=this._mastersService.perPage,this.currentPage=1}ngOnInit(){this.dataservice.setTitle("Service Request"),this.getRequests(),this.getKpisList()}searchTasks(e){0===this.searchTermChanged.observers.length&&this.searchTermChanged.pipe((0,M.b)(600),(0,J.x)()).subscribe(e=>{this.currentPage=1,this.getRequests()}),this.searchTermChanged.next(e)}getRequests(){this._requesterService.getRequests({pageNumber:this.currentPage,numberOfRows:this.perPage,search:this.search,Request_Type:"Service Request",Status:this.KPIkey}).subscribe(e=>{e.error?this._mastersService.showalert(e.message?e.message:e.data[0].msg,"error"):this.response=e},e=>{console.log(e),this._mastersService.showalert(e.error,"error")})}getKpisList(){this._requestsPagesService.getRequestsKPIService({Request_Type:"Service Request"}).subscribe(e=>{this.kpiData.forEach((e,t)=>{e.counter=0}),e.data.forEach((e,t)=>{let n=this.kpiData.findIndex(t=>t.title===e.Status);-1!=n&&(this.kpiData[n].counter=e.StatusCount)})},e=>{400===e.status&&(this._mastersService=e.error.message)})}ViewEngineerModal(e){console.log("inward history req id--\x3e",e),this.bsModalRef1=this.modalService.show(I,{initialState:{type:"view-inward-history",ID:e},animated:!0,keyboard:!0,backdrop:!0,ignoreBackdropClick:!0,class:"modal-lg"}),this.bsModalRef1.content.notifyParent.subscribe(e=>{e&&(this.getKpisList(),this.getRequests())})}openModal(e){this.modalRef=this.modalService.show(e,{class:"modal-dialog-centered modal modal-status"})}activeKPI(e,t){this.KPItitle=t,this.KPIkey=e,this.getRequests()}Onchange(e){this.KPItitle=e,console.log(this.KPItitle)}ServiceRequestExportToExcel(){this._excelService.downloadServiceRequestExport({search:this.search,Request_Type:"Service Request",Status:this.KPIkey}).subscribe(e=>(0,O.saveAs)(e,"Support Excel-Report.xlsx"))}pager(e){console.log("next page",e),this.currentPage=e,this.getRequests()}changePerPage(e){this.currentPage=1,this.perPage=e,this._mastersService.perPage=this.perPage,this.getRequests()}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(a.tT),o.Y36(Y.D),o.Y36(D.S),o.Y36(g.R),o.Y36(Q.x),o.Y36(j.i))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-engineer-dashboard"]],decls:44,vars:5,consts:[[1,"card","card-body","shadow","w-75","mb-4"],[1,"row"],["class","col","style","cursor: pointer;",4,"ngFor","ngForOf"],[1,""],[1,"row","g-2","h-100"],[1,"row","h-100","mb-2"],[1,"col-lg"],[1,"fw-bold","float-left"],[1,"row","h-100"],[1,"col-lg-4","col-12","mb-2"],[1,"input-group","input-group-sm"],[1,"input-group-text","bg-white"],["src","../../../../../assets/icons/search.png","width","18"],["type","text","placeholder","Search Request","placeholder","Search","aria-controls","example1",1,"form-control",3,"ngModel","ngModelChange","keyup"],[1,"col-auto","ms-auto"],[1,"btn","btn-dark","btn-sm","float-right",2,"font-size","13px",3,"click"],[1,"table-responsive"],[1,"table","table-bordered","table-sm","shadow-sm","text-muted","white-space-nowap","mb-0"],[1,"table-light",2,"color","rgba(136, 83, 14, 0.877)"],["scope","col",1,"w-4"],["scope","col",1,"w-20"],["scope","col",1,"w-10"],["scope","col"],["scope","col",1,"w-6"],["scope","col",1,"w-6","text-center"],["class","bg-white",4,"ngIf"],[3,"currentPage","perPage","total","lastPage","loadPage","changePerPage",4,"ngIf"],[1,"col",2,"cursor","pointer"],[3,"title","counter","icon","color","click"],[1,"bg-white"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","9",1,"text-center"],[1,"text-muted",2,"font-size","large"],[1,"ellipsis"],[1,"text-center"],[1,"btn","btn-dark","btn-sm",2,"width","100px","font-size","10px",3,"click"],[3,"currentPage","perPage","total","lastPage","loadPage","changePerPage"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.YNc(2,K,2,4,"div",2),o.qZA(),o.qZA(),o.TgZ(3,"div",3),o._UZ(4,"div",4),o.qZA(),o.TgZ(5,"div",5),o.TgZ(6,"div",6),o.TgZ(7,"h4",7),o._uU(8),o.qZA(),o.qZA(),o.qZA(),o.TgZ(9,"div",8),o.TgZ(10,"div",9),o.TgZ(11,"div",10),o.TgZ(12,"span",11),o._UZ(13,"img",12),o.qZA(),o.TgZ(14,"input",13),o.NdJ("ngModelChange",function(e){return t.search=e})("keyup",function(e){return t.searchTasks(e)}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(15,"div",14),o.TgZ(16,"button",15),o.NdJ("click",function(){return t.ServiceRequestExportToExcel()}),o._uU(17,"Export To Excel"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(18,"div",16),o.TgZ(19,"table",17),o.TgZ(20,"thead",18),o.TgZ(21,"tr"),o.TgZ(22,"th",19),o._uU(23," Sr.No"),o.qZA(),o.TgZ(24,"th",20),o._uU(25,"Request ID"),o.qZA(),o.TgZ(26,"th",21),o._uU(27,"Department"),o.qZA(),o.TgZ(28,"th",22),o._uU(29,"Name"),o.qZA(),o.TgZ(30,"th",21),o._uU(31,"Requester Department(Cost Center)"),o.qZA(),o.TgZ(32,"th",21),o._uU(33,"Request Date"),o.qZA(),o.TgZ(34,"th",23),o._uU(35,"Type Of Issue"),o.qZA(),o.TgZ(36,"th",21),o._uU(37,"Description"),o.qZA(),o.TgZ(38,"th",21),o._uU(39,"Location"),o.qZA(),o.TgZ(40,"th",24),o._uU(41,"Action"),o.qZA(),o.qZA(),o.qZA(),o.YNc(42,B,3,2,"tbody",25),o.qZA(),o.YNc(43,$,1,4,"app-pagination",26),o.qZA()),2&e&&(o.xp6(2),o.Q6J("ngForOf",t.kpiData),o.xp6(6),o.Oqu(t.KPItitle),o.xp6(6),o.Q6J("ngModel",t.search),o.xp6(28),o.Q6J("ngIf",null==t.response?null:t.response.data),o.xp6(1),o.Q6J("ngIf",null==t.response?null:t.response.data))},directives:[s.sg,r.Fj,r.JJ,r.On,s.O5,E.k,F.Q],pipes:[s.uU],styles:[".card[_ngcontent-%COMP%]{border-radius:15px}.ellipsis[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;max-width:60px}[_ngcontent-%COMP%]::placeholder{font-style:italic;opacity:.7}.modal-header[_ngcontent-%COMP%]{background-color:rgba(228,235,243,.712);height:50px}.modal-title[_ngcontent-%COMP%]{font-size:large}.badge.badge-warning[_ngcontent-%COMP%]{background-color:#fff}.badge.badge-outlined.badge-warning[_ngcontent-%COMP%], .badge.badge-warning[_ngcontent-%COMP%]{border-color:#ffd600;color:#ffd600}.badge.badge-outlined[_ngcontent-%COMP%]{background-color:#fff}.badge[_ngcontent-%COMP%]{border:1px solid #0000}.first-row[_ngcontent-%COMP%]{padding:5px}.in-progress[_ngcontent-%COMP%]   .completed[_ngcontent-%COMP%]   .discarded[_ngcontent-%COMP%]   .cancel[_ngcontent-%COMP%]{background-color:#d6d6d6}._footerchangestatus[_ngcontent-%COMP%]{font-weight:900}.modalbutton[_ngcontent-%COMP%]{background-color:#f1f1f1;border:#d3d3d3;font-size:small;color:#5f5f5f;width:120px}.footer-btn-color-1[_ngcontent-%COMP%]{background-color:#000!important;color:#fff!important}.footer-btn-color-2[_ngcontent-%COMP%]{background-color:#000!important;color:#d4890e!important}.footer-btn-color-4[_ngcontent-%COMP%]{background-color:#000!important;color:green!important}.footer-btn-color-3[_ngcontent-%COMP%]{background-color:red!important;color:#fff!important}.default-btn-color[_ngcontent-%COMP%]{background-color:#f1f1f1;border:#d3d3d3;font-size:small;color:#5f5f5f;width:120px}"]}),e})()}];let H=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[i.Bz.forChild(W)],i.Bz]}),e})(),V=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[s.ez,H,r.u5,r.UX]]}),e})()}}]);